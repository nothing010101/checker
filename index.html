<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DROP RADAR v3 â€” EVM Multi-tool</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;700;800&family=Space+Mono:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#04060d;--s1:#080d1c;--s2:#0f1629;--bdr:#1a2540;
  --c:#00e5ff;--p:#a855f7;--g:#10b981;--o:#f59e0b;--r:#ef4444;
  --txt:#dde3f0;--dim:#3d4f6e;--muted:#4a5a7a;
}
*{box-sizing:border-box;margin:0;padding:0;}
html{scroll-behavior:smooth;}
body{background:var(--bg);color:var(--txt);font-family:'Space Mono',monospace;min-height:100vh;overflow-x:hidden;}
body::before{
  content:'';position:fixed;inset:0;pointer-events:none;z-index:0;
  background:
    radial-gradient(ellipse 700px 500px at 10% -5%,rgba(0,229,255,.035) 0%,transparent 70%),
    radial-gradient(ellipse 600px 400px at 90% 105%,rgba(168,85,247,.035) 0%,transparent 70%),
    linear-gradient(rgba(0,229,255,.018) 1px,transparent 1px),
    linear-gradient(90deg,rgba(0,229,255,.018) 1px,transparent 1px);
  background-size:100% 100%,100% 100%,50px 50px,50px 50px;
}
.wrap{max-width:1240px;margin:0 auto;padding:1.5rem 2rem;position:relative;z-index:1;}

/* â”€â”€ NAV TABS â”€â”€ */
.main-tabs{display:flex;gap:.5rem;margin:1.5rem 0;flex-wrap:wrap;}
.mtab{
  padding:.5rem 1.1rem;border-radius:9px;border:1px solid var(--bdr);
  background:var(--s1);font-size:.72rem;letter-spacing:.06em;cursor:pointer;
  color:var(--muted);transition:all .15s;user-select:none;font-family:'Syne',sans-serif;font-weight:700;
}
.mtab:hover{color:var(--txt);border-color:var(--dim);}
.mtab.active{background:var(--c);color:#000;border-color:var(--c);}
.mtab.active.defi-tab{background:var(--p);border-color:var(--p);color:#fff;}

/* â”€â”€ HEADER â”€â”€ */
header{text-align:center;padding:2.5rem 0 1.5rem;}
.vpill{
  display:inline-flex;align-items:center;gap:.5rem;
  background:rgba(0,229,255,.06);border:1px solid rgba(0,229,255,.18);
  border-radius:100px;padding:.3rem .9rem;font-size:.6rem;color:var(--c);
  letter-spacing:.18em;text-transform:uppercase;margin-bottom:1.2rem;
}
.vdot{width:6px;height:6px;border-radius:50%;background:var(--g);box-shadow:0 0 6px var(--g);animation:blink 1.4s ease-in-out infinite;}
@keyframes blink{0%,100%{opacity:1}50%{opacity:.3}}
h1{
  font-family:'Syne',sans-serif;font-size:clamp(2.5rem,6vw,4.5rem);
  font-weight:800;letter-spacing:-.04em;line-height:.95;
  background:linear-gradient(130deg,#fff 0%,var(--c) 50%,var(--p) 100%);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
}
.tagline{color:var(--muted);font-size:.7rem;margin-top:.8rem;letter-spacing:.05em;}
.tagline span{color:var(--c);}

/* â”€â”€ PANELS â”€â”€ */
.panel{display:none;animation:fadeIn .25s ease;}
.panel.active{display:block;}
@keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}

/* â”€â”€ SHARED INPUT â”€â”€ */
.ibox{
  background:var(--s1);border:1px solid var(--bdr);border-radius:14px;
  padding:1.2rem 1.4rem;margin-bottom:1.2rem;position:relative;overflow:hidden;
}
.ibox::before{
  content:'';position:absolute;top:0;left:0;right:0;height:1px;
  background:linear-gradient(90deg,transparent,var(--c) 40%,var(--p) 70%,transparent);
}
.ilabel{font-size:.62rem;color:var(--c);letter-spacing:.16em;text-transform:uppercase;display:block;margin-bottom:.7rem;}
.irow{display:flex;gap:.7rem;flex-wrap:wrap;}
.ainput{
  flex:1;min-width:250px;background:rgba(0,0,0,.5);border:1px solid var(--bdr);
  border-radius:9px;padding:.75rem 1rem;color:var(--txt);
  font-family:'Space Mono',monospace;font-size:.78rem;outline:none;transition:border-color .2s;
}
.ainput:focus{border-color:var(--c);box-shadow:0 0 0 2px rgba(0,229,255,.1);}
.ainput::placeholder{color:var(--muted);}
.ainput.err{border-color:var(--r)!important;animation:shake .3s;}
@keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-4px)}75%{transform:translateX(4px)}}
.btn{
  background:var(--c);color:#000;border:none;border-radius:9px;
  padding:.75rem 1.4rem;font-family:'Syne',sans-serif;font-weight:700;
  font-size:.78rem;letter-spacing:.04em;cursor:pointer;transition:all .2s;white-space:nowrap;
}
.btn:hover:not(:disabled){filter:brightness(1.1);transform:translateY(-1px);box-shadow:0 4px 18px rgba(0,229,255,.25);}
.btn:disabled{opacity:.5;cursor:not-allowed;transform:none;}
.btn.purple{background:var(--p);color:#fff;}
.btn.purple:hover:not(:disabled){box-shadow:0 4px 18px rgba(168,85,247,.3);}
.notice{background:rgba(245,158,11,.06);border:1px solid rgba(245,158,11,.2);border-radius:9px;padding:.65rem .9rem;font-size:.63rem;color:var(--o);line-height:1.6;margin-top:.9rem;}
.realtime-badge{display:inline-flex;align-items:center;gap:.3rem;background:rgba(16,185,129,.1);border:1px solid rgba(16,185,129,.25);border-radius:6px;padding:.18rem .55rem;font-size:.58rem;color:var(--g);letter-spacing:.1em;text-transform:uppercase;margin-top:.6rem;}

/* â”€â”€ SECTION HEADER â”€â”€ */
.sh{display:flex;align-items:center;justify-content:space-between;margin:1.2rem 0 .6rem;}
.sh-t{font-size:.62rem;color:var(--c);letter-spacing:.14em;text-transform:uppercase;}
.sh-a{font-size:.62rem;color:var(--p);cursor:pointer;background:none;border:none;letter-spacing:.04em;text-decoration:underline;}

/* â”€â”€ CHAINS â”€â”€ */
.chains-row{display:flex;flex-wrap:wrap;gap:.4rem;margin-bottom:1.2rem;}
.chip{
  display:flex;align-items:center;gap:.3rem;padding:.32rem .65rem;
  border-radius:7px;border:1px solid var(--bdr);background:var(--s1);
  cursor:pointer;font-size:.65rem;color:var(--muted);transition:all .13s;user-select:none;
}
.chip:hover{color:var(--txt);}
.chip.on{border-color:rgba(0,229,255,.35);background:rgba(0,229,255,.06);color:var(--c);}

/* â”€â”€ PROGRESS â”€â”€ */
.pbox{background:var(--s1);border:1px solid var(--bdr);border-radius:11px;padding:.9rem 1.1rem;margin:1rem 0;display:none;}
.pbox.show{display:block;}
.ptop{display:flex;justify-content:space-between;font-size:.68rem;margin-bottom:.5rem;}
.ptxt{color:var(--muted);}
.ppct{color:var(--c);font-weight:700;}
.ptrack{background:rgba(0,0,0,.5);border-radius:100px;height:4px;overflow:hidden;}
.pfill{height:100%;background:linear-gradient(90deg,var(--c),var(--p));border-radius:100px;transition:width .2s ease;}
.plog{margin-top:.5rem;font-size:.65rem;color:var(--muted);height:1.2em;overflow:hidden;}

/* â”€â”€ SUMMARY â”€â”€ */
.stats{display:grid;grid-template-columns:repeat(4,1fr);gap:.7rem;margin:1.1rem 0;}
@media(max-width:650px){.stats{grid-template-columns:repeat(2,1fr);}}
.sbox{background:var(--s1);border:1px solid var(--bdr);border-radius:11px;padding:.9rem;text-align:center;position:relative;overflow:hidden;}
.sbox::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;}
.sbox.c1::before{background:linear-gradient(90deg,var(--g),transparent);}
.sbox.c2::before{background:linear-gradient(90deg,var(--o),transparent);}
.sbox.c3::before{background:linear-gradient(90deg,var(--c),transparent);}
.sbox.c4::before{background:linear-gradient(90deg,var(--p),transparent);}
.sv{font-family:'Syne',sans-serif;font-size:1.5rem;font-weight:800;display:block;}
.sbox.c1 .sv{color:var(--g);}.sbox.c2 .sv{color:var(--o);}.sbox.c3 .sv{color:var(--c);}.sbox.c4 .sv{color:var(--p);}
.sl{font-size:.58rem;color:var(--muted);text-transform:uppercase;letter-spacing:.1em;margin-top:.2rem;}

/* â”€â”€ CARDS GRID â”€â”€ */
.cgrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:.85rem;}

/* â”€â”€ AIRDROP CARD â”€â”€ */
.acard{
  background:var(--s1);border:1px solid var(--bdr);border-radius:13px;padding:1rem;
  position:relative;overflow:hidden;animation:fup .3s ease forwards;opacity:0;transition:transform .2s;
}
.acard:hover{transform:translateY(-2px);}
@keyframes fup{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}
.acard::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;}
.acard.elig{border-color:rgba(16,185,129,.3);}
.acard.elig::before{background:linear-gradient(90deg,var(--g),var(--c));}
.acard.xpired{opacity:.42;border-color:rgba(239,68,68,.18);}
.acard.xpired::before{background:linear-gradient(90deg,var(--r),transparent);}
.acard.inel{opacity:.52;}
.acard.upco{border-color:rgba(168,85,247,.22);}
.acard.upco::before{background:linear-gradient(90deg,var(--p),transparent);}
.catbadge{position:absolute;top:.65rem;right:.65rem;font-size:.52rem;letter-spacing:.1em;text-transform:uppercase;padding:.15rem .48rem;border-radius:100px;font-weight:700;}
.catbadge.historic{background:rgba(245,158,11,.12);color:var(--o);border:1px solid rgba(245,158,11,.22);}
.catbadge.current{background:rgba(0,229,255,.09);color:var(--c);border:1px solid rgba(0,229,255,.18);}
.catbadge.upcoming{background:rgba(168,85,247,.1);color:var(--p);border:1px solid rgba(168,85,247,.22);}
.ctop{display:flex;align-items:center;gap:.6rem;margin-bottom:.75rem;padding-right:3.5rem;}
.cico{width:36px;height:36px;border-radius:8px;background:var(--s2);display:flex;align-items:center;justify-content:center;font-size:1.1rem;flex-shrink:0;border:1px solid var(--bdr);}
.cn{font-family:'Syne',sans-serif;font-weight:700;font-size:.88rem;}
.cm{font-size:.6rem;color:var(--muted);}
.spill{display:inline-flex;align-items:center;gap:.28rem;padding:.2rem .55rem;border-radius:100px;font-size:.58rem;font-weight:700;letter-spacing:.08em;text-transform:uppercase;}
.spill.e{background:rgba(16,185,129,.14);color:var(--g);border:1px solid rgba(16,185,129,.22);}
.spill.x{background:rgba(239,68,68,.1);color:var(--r);border:1px solid rgba(239,68,68,.18);}
.spill.n{background:rgba(74,90,122,.25);color:var(--muted);border:1px solid var(--bdr);}
.spill.u{background:rgba(168,85,247,.1);color:var(--p);border:1px solid rgba(168,85,247,.22);}
.spill.ex{background:rgba(245,158,11,.1);color:var(--o);border:1px solid rgba(245,158,11,.22);}
.crit{background:rgba(0,0,0,.3);border:1px solid var(--bdr);border-radius:6px;padding:.32rem .55rem;font-size:.6rem;color:var(--muted);margin:.6rem 0;line-height:1.5;}
.amtrow{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:.65rem;}
.aml{font-size:.56rem;color:var(--muted);text-transform:uppercase;letter-spacing:.08em;}
.amv{font-family:'Syne',sans-serif;font-weight:700;color:var(--g);font-size:.95rem;}
.amusd{font-size:.62rem;color:var(--muted);}
.dl{text-align:right;max-width:110px;}
.dlv{font-size:.58rem;line-height:1.45;}
.dlv.cl{color:var(--r);text-decoration:line-through;}
.dlv.op{color:var(--g);}
.dlv.tb{color:var(--p);}
.dlv.so{color:var(--o);}
.cact{width:100%;padding:.52rem;border-radius:7px;border:none;font-family:'Syne',sans-serif;font-weight:700;font-size:.72rem;letter-spacing:.04em;cursor:pointer;transition:all .2s;}
.cact.claim{background:var(--g);color:#000;}.cact.claim:hover{background:#0ea573;}
.cact.ex{background:var(--s2);color:var(--muted);cursor:not-allowed;}
.cact.farm{background:rgba(168,85,247,.14);color:var(--p);border:1px solid rgba(168,85,247,.28);}.cact.farm:hover{background:rgba(168,85,247,.26);}
.cact.view{background:rgba(0,229,255,.07);color:var(--c);border:1px solid rgba(0,229,255,.18);}.cact.view:hover{background:rgba(0,229,255,.14);}
.cnote{font-size:.56rem;color:var(--muted);margin-top:.45rem;padding-top:.45rem;border-top:1px solid var(--bdr);}

/* â”€â”€ DEFI PANEL â”€â”€ */
.defi-intro{background:var(--s1);border:1px solid var(--bdr);border-radius:14px;padding:1.2rem 1.4rem;margin-bottom:1.2rem;position:relative;overflow:hidden;}
.defi-intro::before{content:'';position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,var(--p) 40%,var(--c) 70%,transparent);}
.api-sources{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:.9rem;}
.api-badge{display:flex;align-items:center;gap:.35rem;padding:.3rem .65rem;border-radius:7px;border:1px solid var(--bdr);background:var(--s2);font-size:.62rem;color:var(--txt);}
.api-live{width:5px;height:5px;border-radius:50%;background:var(--g);box-shadow:0 0 5px var(--g);}
.api-info{width:5px;height:5px;border-radius:50%;background:var(--o);}

/* â”€â”€ DEFI RESULT CARDS â”€â”€ */
.dcard{
  background:var(--s1);border:1px solid var(--bdr);border-radius:13px;padding:1rem;
  position:relative;overflow:hidden;animation:fup .3s ease forwards;opacity:0;
}
.dcard.has-val{border-color:rgba(168,85,247,.28);}
.dcard.has-val::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,var(--p),var(--c));}
.dcard.token-card{border-color:rgba(0,229,255,.2);}
.dcard.token-card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,var(--c),transparent);}
.dcard.lp-card{border-color:rgba(16,185,129,.22);}
.dcard.lp-card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,var(--g),transparent);}
.dtype-badge{position:absolute;top:.65rem;right:.65rem;font-size:.52rem;letter-spacing:.1em;text-transform:uppercase;padding:.15rem .5rem;border-radius:100px;font-weight:700;}
.dtype-badge.dt{background:rgba(0,229,255,.1);color:var(--c);border:1px solid rgba(0,229,255,.2);}
.dtype-badge.dp{background:rgba(168,85,247,.12);color:var(--p);border:1px solid rgba(168,85,247,.22);}
.dtype-badge.dl{background:rgba(16,185,129,.1);color:var(--g);border:1px solid rgba(16,185,129,.2);}
.dtop{display:flex;align-items:center;gap:.6rem;margin-bottom:.7rem;padding-right:3.5rem;}
.dico{width:38px;height:38px;border-radius:9px;background:var(--s2);display:flex;align-items:center;justify-content:center;font-size:1.15rem;flex-shrink:0;border:1px solid var(--bdr);}
.dname{font-family:'Syne',sans-serif;font-weight:700;font-size:.88rem;}
.dmeta{font-size:.6rem;color:var(--muted);}
.dval-row{display:flex;justify-content:space-between;align-items:center;background:rgba(0,0,0,.3);border-radius:7px;padding:.55rem .7rem;margin:.5rem 0;}
.dvl{font-size:.58rem;color:var(--muted);text-transform:uppercase;letter-spacing:.08em;}
.dvv{font-family:'Syne',sans-serif;font-weight:700;font-size:1rem;}
.dvv.green{color:var(--g);}
.dvv.cyan{color:var(--c);}
.dvv.purple{color:var(--p);}
.dact{width:100%;padding:.48rem;border-radius:7px;border:1px solid rgba(0,229,255,.18);background:rgba(0,229,255,.06);color:var(--c);font-family:'Syne',sans-serif;font-weight:700;font-size:.7rem;cursor:pointer;transition:all .2s;margin-top:.5rem;}
.dact:hover{background:rgba(0,229,255,.14);}
.dact.papl{border-color:rgba(168,85,247,.28);background:rgba(168,85,247,.08);color:var(--p);}
.dact.papl:hover{background:rgba(168,85,247,.18);}

/* â”€â”€ EMPTY/ERROR â”€â”€ */
.empty{text-align:center;padding:4rem 1rem;color:var(--muted);}
.empty-ico{font-size:3rem;opacity:.25;margin-bottom:1rem;}
.empty-t{font-family:'Syne',sans-serif;font-size:1rem;margin-bottom:.4rem;color:var(--dim);}

/* â”€â”€ FILTER TABS â”€â”€ */
.ftabs{display:flex;gap:.45rem;flex-wrap:wrap;margin:1rem 0;}
.ftab{padding:.35rem .8rem;border-radius:7px;border:1px solid var(--bdr);background:var(--s1);font-size:.65rem;letter-spacing:.05em;cursor:pointer;color:var(--muted);transition:all .15s;user-select:none;}
.ftab:hover{color:var(--txt);}
.ftab.fa{color:#000;background:var(--g);border-color:var(--g);}
.ftab.fc{color:#000;background:var(--c);border-color:var(--c);}
.ftab.fh{color:#000;background:var(--o);border-color:var(--o);}
.ftab.fu{color:#fff;background:var(--p);border-color:var(--p);}
.ftab.fe{color:#000;background:var(--g);border-color:var(--g);}

/* â”€â”€ TRACKERS SECTION â”€â”€ */
.tracker-links{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:.65rem;margin-top:.8rem;}
.tlink{
  display:flex;align-items:center;gap:.65rem;padding:.75rem .9rem;
  background:var(--s2);border:1px solid var(--bdr);border-radius:10px;
  cursor:pointer;transition:all .2s;text-decoration:none;color:var(--txt);
}
.tlink:hover{border-color:var(--p);background:rgba(168,85,247,.06);}
.tlink-ico{font-size:1.4rem;flex-shrink:0;}
.tlink-name{font-family:'Syne',sans-serif;font-weight:700;font-size:.78rem;}
.tlink-desc{font-size:.58rem;color:var(--muted);}

/* â”€â”€ LOADING SPINNER â”€â”€ */
.spin{display:inline-block;width:12px;height:12px;border:2px solid rgba(0,229,255,.2);border-top-color:var(--c);border-radius:50%;animation:sp .6s linear infinite;vertical-align:middle;margin-right:.4rem;}
@keyframes sp{to{transform:rotate(360deg)}}

/* â”€â”€ FOOTER â”€â”€ */
footer{text-align:center;padding:2rem 0;color:var(--muted);font-size:.62rem;border-top:1px solid var(--bdr);margin-top:3rem;line-height:1.9;}
footer a{color:var(--c);text-decoration:none;}

/* â”€â”€ LEGEND â”€â”€ */
.legend{display:flex;gap:.9rem;flex-wrap:wrap;margin:.4rem 0 1rem;font-size:.6rem;color:var(--muted);}
.ldot{width:7px;height:7px;border-radius:2px;display:inline-block;margin-right:.25rem;}
</style>
</head>
<body>
<div class="wrap">

<header>
  <div class="vpill"><div class="vdot"></div> v3.0 Â· REAL-TIME DATA</div>
  <h1>DROP RADAR</h1>
  <p class="tagline">// <span>Airdrop</span> Â· <span>DeFi Positions</span> Â· <span>Token Balances</span> Â· <span>LP & Locks</span> Â· All EVM</p>
</header>

<!-- NAV -->
<div class="main-tabs">
  <div class="mtab active" onclick="showPanel('airdrop',this)">ğŸª‚ Airdrop Scanner</div>
  <div class="mtab defi-tab" onclick="showPanel('defi',this)">âš—ï¸ DeFi / Token / LP Checker</div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• AIRDROP PANEL â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="panel active" id="panel-airdrop">
  <div class="ftabs">
    <div class="ftab fa" onclick="setFilter(this,'all')">ğŸ” Semua (37)</div>
    <div class="ftab" onclick="setFilter(this,'current')">âš¡ Active</div>
    <div class="ftab" onclick="setFilter(this,'historic')">ğŸ“œ Historic</div>
    <div class="ftab" onclick="setFilter(this,'upcoming')">ğŸ”® Upcoming</div>
    <div class="ftab" onclick="setFilter(this,'eligible')">âœ… Eligible</div>
  </div>

  <div class="ibox">
    <span class="ilabel">â–¸ EVM Wallet Address</span>
    <div class="irow">
      <input type="text" class="ainput" id="airWallet" placeholder="0x... masukkan wallet lo" maxlength="42">
      <button class="btn" id="airBtn" onclick="startAirdrop()">âš¡ SCAN AIRDROPS</button>
    </div>
    <div class="notice">âš ï¸ Database 37 airdrop di-research manual per Feb 2026. Simulasi eligibility berbasis address hash â€” verifikasi di situs resmi sebelum klaim!</div>
  </div>

  <div class="sh">
    <span class="sh-t">â–¸ Chain Filter</span>
    <button class="sh-a" onclick="toggleAllChains()">Toggle All</button>
  </div>
  <div class="chains-row" id="chainsRow"></div>

  <div class="legend">
    <span><span class="ldot" style="background:var(--g)"></span>Eligible & Claimable</span>
    <span><span class="ldot" style="background:var(--o)"></span>Eligible tapi Expired</span>
    <span><span class="ldot" style="background:var(--p)"></span>Upcoming/Farm</span>
    <span><span class="ldot" style="background:var(--r)"></span>Expired</span>
  </div>

  <div class="pbox" id="airProg">
    <div class="ptop"><span class="ptxt" id="airPTxt">Scanning...</span><span class="ppct" id="airPPct">0%</span></div>
    <div class="ptrack"><div class="pfill" id="airPFill" style="width:0%"></div></div>
    <div class="plog" id="airPLog"></div>
  </div>

  <div id="airStats" style="display:none">
    <div class="stats">
      <div class="sbox c1"><span class="sv" id="aE">0</span><div class="sl">Eligible & Claimable</div></div>
      <div class="sbox c2"><span class="sv" id="aX">0</span><div class="sl">Eligible tapi Expired</div></div>
      <div class="sbox c3"><span class="sv" id="aU">$0</span><div class="sl">Est. Claimable Value</div></div>
      <div class="sbox c4"><span class="sv" id="aT">0</span><div class="sl">Projects Scanned</div></div>
    </div>
  </div>

  <div id="airEmpty" class="empty">
    <div class="empty-ico">ğŸ›¸</div>
    <div class="empty-t">Belum ada scan</div>
    <div>Masukkan wallet address dan klik SCAN AIRDROPS</div>
  </div>
  <div class="cgrid" id="airGrid"></div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• DEFI PANEL â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="panel" id="panel-defi">

  <div class="defi-intro">
    <span class="ilabel">â–¸ DeFi Â· Token Â· LP Â· Locked Asset Checker</span>
    <p style="font-size:.68rem;color:var(--muted);line-height:1.6;margin-bottom:.7rem;">
      Cek real-time token balances (ERC-20), DeFi positions, LP tokens, dan aset yang mungkin lo lupa lock di berbagai protokol.
      Data diambil langsung dari <strong style="color:var(--c)">Ethplorer API</strong> (Ethereum mainnet, real token data) dan
      <strong style="color:var(--c)">CoinGecko API</strong> (harga real-time). Untuk DeFi positions multi-chain, gunakan link tracker di bawah.
    </p>
    <div class="api-sources">
      <div class="api-badge"><span class="api-live"></span> Ethplorer API â€” Real ERC-20 Balances</div>
      <div class="api-badge"><span class="api-live"></span> CoinGecko API â€” Real-time Prices</div>
      <div class="api-badge"><span class="api-info"></span> Zapper/DeBank â€” DeFi Position Links</div>
    </div>
    <div class="realtime-badge">âš¡ Live on-chain data Â· No dummy data</div>
  </div>

  <div class="ibox">
    <span class="ilabel">â–¸ EVM Wallet Address (Ethereum Mainnet)</span>
    <div class="irow">
      <input type="text" class="ainput" id="defiWallet" placeholder="0x... paste wallet lo disini" maxlength="42">
      <button class="btn purple" id="defiBtn" onclick="startDefi()">ğŸ”¬ CEK DEFI & TOKENS</button>
    </div>
    <div class="notice">
      âš ï¸ <strong>Token balance</strong>: Real-time dari Ethplorer (Ethereum mainnet). 
      <strong>DeFi Positions</strong>: Klik tombol di bawah untuk langsung ke tracker yang support semua chain.
      Tidak ada private key yang dibutuhkan â€” hanya read-only.
    </div>
  </div>

  <div class="pbox" id="defiProg">
    <div class="ptop"><span class="ptxt" id="defiPTxt">Fetching on-chain data...</span><span class="ppct" id="defiPPct">0%</span></div>
    <div class="ptrack"><div class="pfill" id="defiPFill" style="width:0%"></div></div>
    <div class="plog" id="defiPLog"></div>
  </div>

  <div id="defiStats" style="display:none">
    <div class="stats">
      <div class="sbox c3"><span class="sv" id="dTokens">0</span><div class="sl">ERC-20 Tokens</div></div>
      <div class="sbox c1"><span class="sv" id="dUSD">$0</span><div class="sl">Est. Total Value</div></div>
      <div class="sbox c4"><span class="sv" id="dChain">ETH</span><div class="sl">Network</div></div>
      <div class="sbox c2"><span class="sv" id="dStatus">â€”</span><div class="sl">Fetch Status</div></div>
    </div>
  </div>

  <div id="defiEmpty" class="empty">
    <div class="empty-ico">âš—ï¸</div>
    <div class="empty-t">Belum ada data</div>
    <div>Masukkan wallet address dan klik CEK DEFI & TOKENS</div>
  </div>

  <div id="defiResults" style="display:none">
    <!-- Token section -->
    <div id="tokenSection">
      <div class="sh"><span class="sh-t">â–¸ Token Balances (Real-time Â· Ethereum)</span></div>
      <div class="cgrid" id="tokenGrid"></div>
    </div>

    <!-- DeFi & LP Trackers -->
    <div id="trackerSection" style="margin-top:1.5rem">
      <div class="sh"><span class="sh-t">â–¸ DeFi Positions & LP â€” Open di Tracker (Multi-chain)</span></div>
      <p style="font-size:.65rem;color:var(--muted);margin-bottom:.7rem;">
        Klik tracker di bawah untuk cek DeFi positions, LP tokens, dan token locks kamu secara real-time di semua EVM chain.
        Tracker ini support Aave, Uniswap LP, Curve, Compound, Lido, EigenLayer, token locks, dan lebih dari 500+ protokol.
      </p>
      <div class="tracker-links" id="trackerLinks"></div>
    </div>

    <!-- Potential Forgotten Assets -->
    <div id="forgotSection" style="margin-top:1.5rem">
      <div class="sh"><span class="sh-t">â–¸ ğŸ” Cek Protokol Yang Sering Terlupakan</span></div>
      <div class="cgrid" id="forgotGrid"></div>
    </div>
  </div>

</div>

<footer>
  DROP RADAR v3.0 â€” Real-time data powered by <a href="https://ethplorer.io" target="_blank">Ethplorer API</a> & <a href="https://coingecko.com" target="_blank">CoinGecko API</a><br>
  DeFi Trackers: <a href="https://zapper.xyz" target="_blank">Zapper</a> Â· <a href="https://debank.com" target="_blank">DeBank</a> Â· <a href="https://app.zerion.io" target="_blank">Zerion</a> Â· <a href="https://llamafolio.com" target="_blank">LlamaFolio</a><br>
  <span style="color:var(--r)">âš  Never share private key atau seed phrase. Tool ini bersifat read-only.</span>
</footer>
</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CHAINS DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const CHAINS=[
  {id:'ethereum',n:'Ethereum',i:'âŸ '},{id:'arbitrum',n:'Arbitrum',i:'ğŸ”µ'},
  {id:'optimism',n:'Optimism',i:'ğŸ”´'},{id:'base',n:'Base',i:'ğŸ”·'},
  {id:'polygon',n:'Polygon',i:'ğŸŸ£'},{id:'zksync',n:'zkSync',i:'âš¡'},
  {id:'scroll',n:'Scroll',i:'ğŸ“œ'},{id:'linea',n:'Linea',i:'ğŸŸ©'},
  {id:'blast',n:'Blast',i:'ğŸ’¥'},{id:'mantle',n:'Mantle',i:'ğŸŒ€'},
  {id:'mode',n:'Mode',i:'ğŸŸ¡'},{id:'manta',n:'Manta',i:'ğŸ‹'},
  {id:'taiko',n:'Taiko',i:'ğŸ'},{id:'bsc',n:'BNB Chain',i:'ğŸŸ¡'},
  {id:'avalanche',n:'Avalanche',i:'ğŸ”º'},{id:'zora',n:'Zora',i:'ğŸµ'},
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// AIRDROP DATABASE (same as v2)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const DROPS=[
  {id:'uni20',n:'Uniswap UNI',i:'ğŸ¦„',ch:'Ethereum',cs:['ethereum'],t:'UNI',cat:'historic',cs2:'expired',dl:'Sep 2020 â€” CLOSED',url:'https://app.uniswap.org',crit:'Pernah swap di Uniswap sebelum Sep 2020. 400 UNI per wallet.',max:400,p:9.5,note:'Airdrop pertama & terbesar DeFi. Sudah closed.'},
  {id:'ens21',n:'ENS Domain',i:'ğŸ”·',ch:'Ethereum',cs:['ethereum'],t:'ENS',cat:'historic',cs2:'expired',dl:'May 2022 â€” CLOSED',url:'https://app.ens.domains',crit:'Pernah punya .eth domain sebelum Oct 2021.',max:1000,p:18,note:'Deadline sudah lewat.'},
  {id:'arb23',n:'Arbitrum ARB',i:'ğŸ”µ',ch:'Arbitrum',cs:['arbitrum'],t:'ARB',cat:'historic',cs2:'expired',dl:'Sep 2023 â€” CLOSED',url:'https://arbitrum.foundation',crit:'Transaksi aktif di Arbitrum One/Nova sebelum snapshot Feb 2023.',max:3000,p:1.2,note:'$1.97 miliar didistribusikan.'},
  {id:'op1',n:'Optimism OP #1',i:'ğŸ”´',ch:'Optimism',cs:['optimism'],t:'OP',cat:'historic',cs2:'expired',dl:'Sep 2022 â€” CLOSED',url:'https://app.optimism.io/airdrops',crit:'OP Mainnet aktif sebelum Jun 2022.',max:2000,p:2.1,note:'Closed.'},
  {id:'op2',n:'Optimism OP #2',i:'ğŸ”´',ch:'Optimism',cs:['optimism'],t:'OP',cat:'historic',cs2:'expired',dl:'Feb 2024 â€” CLOSED',url:'https://app.optimism.io/airdrops',crit:'OP Governance delegator aktif Feb 2023.',max:3000,p:2.3,note:'Closed.'},
  {id:'op3',n:'Optimism OP #3',i:'ğŸ”´',ch:'Optimism',cs:['optimism'],t:'OP',cat:'historic',cs2:'expired',dl:'Sep 2024 â€” CLOSED',url:'https://app.optimism.io/airdrops',crit:'Active governance participant, Sep 2023.',max:2500,p:1.8,note:'Closed.'},
  {id:'op4',n:'Optimism OP #4',i:'ğŸ”´',ch:'Superchain',cs:['optimism','base'],t:'OP',cat:'historic',cs2:'expired',dl:'Feb 13 2025 â€” CLOSED',url:'https://app.optimism.io/airdrops',crit:'Superchain user Mar-Sep 2024, â‰¥20 smart contracts.',max:2000,p:1.5,note:'Closed Feb 13 2025.'},
  {id:'zk24',n:'zkSync ZK S1',i:'âš¡',ch:'zkSync Era',cs:['zksync'],t:'ZK',cat:'historic',cs2:'expired',dl:'3 Jan 2025 â€” CLOSED',url:'https://claim.zknation.io',crit:'â‰¥10 smart contract di zkSync Era sebelum 24 Mar 2024.',max:100000,p:0.06,note:'Expired. Unclaimed tokens kena exploit April 2025.'},
  {id:'strk',n:'StarkNet STRK',i:'â­',ch:'StarkNet',cs:['ethereum'],t:'STRK',cat:'historic',cs2:'expired',dl:'Jun 2024 â€” CLOSED',url:'https://provisions.starknet.io',crit:'DeFi users Ethereum aktif sebelum 2023.',max:5000,p:0.35,note:'Closed.'},
  {id:'blur',n:'Blur BLUR',i:'ğŸ’¨',ch:'Ethereum',cs:['ethereum'],t:'BLUR',cat:'historic',cs2:'expired',dl:'Feb 2023 â€” CLOSED',url:'https://blur.io',crit:'NFT trader aktif di Blur/OpenSea.',max:20000,p:0.28,note:'Closed.'},
  {id:'zro1',n:'LayerZero ZRO S1',i:'ğŸ”—',ch:'Multi-chain',cs:['ethereum','arbitrum','optimism','polygon','base'],t:'ZRO',cat:'historic',cs2:'expired',dl:'Des 2024 â€” CLOSED',url:'https://layerzero.foundation',crit:'Bridge via LayerZero sebelum Mei 2024.',max:1000,p:3.8,note:'S1 closed. S2 sedang farming.'},
  {id:'mav',n:'Maverick MAV',i:'ğŸ’«',ch:'Ethereum/zkSync',cs:['ethereum','zksync'],t:'MAV',cat:'historic',cs2:'expired',dl:'2024 â€” CLOSED',url:'https://mav.xyz',crit:'LP aktif di Maverick Protocol.',max:5000,p:0.2,note:'Beberapa user ketemu ribuan $ unclaimed MAV.'},
  {id:'wh',n:'Wormhole W',i:'ğŸ•³ï¸',ch:'Multi-chain',cs:['ethereum','arbitrum','base'],t:'W',cat:'historic',cs2:'expired',dl:'Apr 2024 â€” CLOSED',url:'https://wormhole.com',crit:'Bridge Wormhole aktif sebelum Feb 2024.',max:10000,p:0.25,note:'Closed.'},
  // CURRENT
  {id:'opss',n:'OP SuperStacks',i:'ğŸ”´',ch:'Superchain',cs:['optimism','base'],t:'OP',cat:'current',cs2:'open',dl:'Jul 2025 â†’ 1yr window',url:'https://app.optimism.io/airdrops',crit:'Partisipasi SuperStacks, liquidity di Superchain DeFi.',max:500,p:1.5,note:'1 tahun window dari Jul 2025!'},
  {id:'scr',n:'Scroll SCR',i:'ğŸ“œ',ch:'Scroll',cs:['scroll'],t:'SCR',cat:'current',cs2:'open',dl:'Masih Open',url:'https://scroll.io/sessions',crit:'Transaksi aktif di Scroll, bridge, interact dApps.',max:1200,p:0.8,note:'Check Sessions points sekarang!'},
  {id:'taiko',n:'Taiko Trailblazers',i:'ğŸ',ch:'Taiko',cs:['taiko'],t:'TAIKO',cat:'current',cs2:'open',dl:'Ongoing Multi-Season',url:'https://trailblazers.taiko.xyz',crit:'Aktif di Taiko mainnet: bridge, swap, deploy.',max:500,p:1.1,note:'Multi-season, masih bisa farming!'},
  {id:'ethfi',n:'Ether.fi ETHFI S5',i:'ğŸ’',ch:'Ethereum+L2',cs:['ethereum','arbitrum','base'],t:'ETHFI',cat:'current',cs2:'open',dl:'Febâ€“Mei 2025',url:'https://app.ether.fi',crit:'Stake ETH di Ether.fi (weETH), hold â‰¥7 hari.',max:300,p:2.5,note:'Season 5 active. Cek app!'},
  {id:'lxp',n:'Linea LXP-L Points',i:'ğŸŸ©',ch:'Linea',cs:['linea'],t:'LXP-L',cat:'current',cs2:'open',dl:'Ongoing â€” Pre TGE',url:'https://linea.build/surge',crit:'Aktif di Linea: swap, bridge, deploy.',max:5000,p:0.15,note:'Belum TGE â€” prime time farming!'},
  {id:'eigen2',n:'EigenLayer EIGEN S2',i:'ğŸ”®',ch:'Ethereum',cs:['ethereum'],t:'EIGEN',cat:'current',cs2:'open',dl:'Season 2 Ongoing',url:'https://app.eigenlayer.xyz',crit:'Restake ETH/LST di EigenLayer.',max:200,p:2.8,note:'Cek allocation kamu!'},
  {id:'hype2',n:'Hyperliquid HYPE S2',i:'ğŸŒŠ',ch:'HyperEVM',cs:['ethereum'],t:'HYPE',cat:'current',cs2:'open',dl:'2026 Active',url:'https://app.hyperliquid.xyz',crit:'Trade perps di Hyperliquid. S1 = $6.2B market cap!',max:500,p:12,note:'S2 active. High potential!'},
  {id:'merkl',n:'Merkl LP Rewards',i:'ğŸ¯',ch:'Multi-chain',cs:['ethereum','arbitrum','optimism','base'],t:'Various',cat:'current',cs2:'open',dl:'Always New',url:'https://merkl.xyz',crit:'Provide liquidity di Uniswap V3/V4 pools yang di-incentive.',max:1000,p:0.5,note:'Cek unclaimed LP rewards!'},
  {id:'blast2',n:'Blast Season Rewards',i:'ğŸ’¥',ch:'Blast',cs:['blast'],t:'BLAST',cat:'current',cs2:'open',dl:'Ongoing',url:'https://blast.io/en/airdrop',crit:'Hold ETH di Blast, pakai native dApps.',max:800,p:0.017,note:'Masih ada rewards!'},
  {id:'mode',n:'Mode Network Rewards',i:'ğŸŸ¡',ch:'Mode',cs:['mode'],t:'MODE',cat:'current',cs2:'open',dl:'Ongoing',url:'https://app.mode.network',crit:'Deposit & interact dApps di Mode Network.',max:5000,p:0.025,note:'Ongoing MODE rewards!'},
  {id:'obol',n:'Obol OBOL',i:'â›“ï¸',ch:'Ethereum',cs:['ethereum'],t:'OBOL',cat:'current',cs2:'open',dl:'Recent Launch',url:'https://obol.org',crit:'ETH staking node operator, contributor.',max:1000,p:0.8,note:'Recent launch, cek eligibility!'},
  {id:'mantle',n:'Mantle Journey',i:'ğŸŒ€',ch:'Mantle',cs:['mantle'],t:'MNT',cat:'current',cs2:'open',dl:'Ongoing',url:'https://mantle.xyz',crit:'Aktif di Mantle: swap, bridge, stake mETH.',max:3000,p:0.4,note:'Masih aktif!'},
  // UPCOMING
  {id:'zro2',n:'LayerZero ZRO S2',i:'ğŸ”—',ch:'Multi-chain',cs:['ethereum','arbitrum','optimism','base'],t:'ZRO',cat:'upcoming',cs2:'upcoming',dl:'TBD 2026',url:'https://layerzero.network',crit:'Bridge via LayerZero V2, multi-chain volume.',max:2000,p:4.0,note:'Top opportunity 2026!'},
  {id:'basetoken',n:'Base Token (Spekulatif)',i:'ğŸ”·',ch:'Base',cs:['base'],t:'BASE',cat:'upcoming',cs2:'upcoming',dl:'TBD â€” Announced Sep 2025',url:'https://base.org',crit:'Aktif di Base: swap, bridge, mint.',max:1000,p:0,note:'Signaled Sep 2025!'},
  {id:'mask',n:'MetaMask MASK',i:'ğŸ¦Š',ch:'Multi-chain',cs:['ethereum','base'],t:'MASK',cat:'upcoming',cs2:'upcoming',dl:'TBD â€” Announced Sep 2025',url:'https://metamask.io',crit:'Gunakan MetaMask built-in: swap, bridge, perps.',max:500,p:0,note:'Consensys CEO confirm!'},
  {id:'unichain',n:'Unichain (Potential)',i:'ğŸ¦„',ch:'Unichain',cs:['ethereum','base'],t:'UNI-CHAIN',cat:'upcoming',cs2:'upcoming',dl:'Farm Now',url:'https://unichain.org',crit:'Aktif di Unichain L2: swap, bridge, liquidity.',max:2000,p:0,note:'Belum token â€” perfect time!'},
  {id:'monad',n:'Monad MON',i:'ğŸŸ£',ch:'Monad',cs:['ethereum'],t:'MON',cat:'upcoming',cs2:'upcoming',dl:'Testnet Active 2026',url:'https://monad.xyz',crit:'DeFi users (Aave, Curve), NFT holders, DAO voters.',max:1000,p:0,note:'$244M funded. Big potential!'},
  {id:'farcaster',n:'Farcaster (Potential)',i:'ğŸ“¡',ch:'Base/Optimism',cs:['base','optimism'],t:'FC',cat:'upcoming',cs2:'upcoming',dl:'No Token Yet',url:'https://warpcast.com',crit:'Active Farcaster/Warpcast user. $150M backed.',max:3000,p:0,note:'Kandidat airdrop terbesar!'},
  {id:'symbiotic',n:'Symbiotic Points',i:'âš™ï¸',ch:'Ethereum',cs:['ethereum'],t:'SYMB',cat:'upcoming',cs2:'upcoming',dl:'Farming Active',url:'https://symbiotic.fi',crit:'Restake via Symbiotic protocol.',max:2000,p:0,note:'Alternatif EigenLayer!'},
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DEFI - Known protocols to check
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const FORGOTTEN_PROTOCOLS=[
  {ico:'ğŸ”·',n:'Uniswap V2/V3 LP',desc:'LP tokens yang mungkin masih locked',url:'https://app.uniswap.org/#/pool',chains:'ETH,Arb,Opt,Base,Poly'},
  {ico:'ğŸŸ¢',n:'Aave V2/V3',desc:'Supplied/borrowed assets + unclaimed rewards',url:'https://app.aave.com',chains:'ETH,Arb,Opt,Base,Poly,Gnosis'},
  {ico:'ğŸŒ€',n:'Curve Finance',desc:'LP positions + CRV gauge rewards',url:'https://curve.fi',chains:'ETH,Arb,Opt,Base,Poly'},
  {ico:'ğŸ¦',n:'Compound V2/V3',desc:'Supplied assets + unclaimed COMP',url:'https://app.compound.finance',chains:'ETH,Arb,Base,Poly'},
  {ico:'ğŸ”µ',n:'MakerDAO / Sky',desc:'CDP vaults, DAI/USDS positions',url:'https://app.spark.fi',chains:'ETH'},
  {ico:'ğŸ’§',n:'Lido Finance',desc:'stETH/wstETH staking rewards',url:'https://stake.lido.fi',chains:'ETH,Poly,Arb,Opt'},
  {ico:'ğŸ”®',n:'EigenLayer',desc:'Restaked ETH, unclaimed EIGEN rewards',url:'https://app.eigenlayer.xyz',chains:'ETH'},
  {ico:'ğŸŒŠ',n:'Balancer',desc:'BPT LP tokens + BAL rewards',url:'https://app.balancer.fi',chains:'ETH,Arb,Opt,Base,Poly'},
  {ico:'ğŸ¦‹',n:'Morpho',desc:'Optimized lending positions',url:'https://app.morpho.org',chains:'ETH,Base'},
  {ico:'ğŸ’',n:'Ether.fi',desc:'weETH staking + ETHFI rewards',url:'https://app.ether.fi',chains:'ETH,Arb,Base'},
  {ico:'ğŸ”',n:'Team Finance / Unicrypt',desc:'Token locks yang mungkin sudah bisa unlock',url:'https://www.team.finance',chains:'ETH,BSC,Arb,Base'},
  {ico:'â°',n:'Convex Finance',desc:'cvxCRV staking + CVX rewards',url:'https://www.convexfinance.com',chains:'ETH'},
  {ico:'ğŸ¦Š',n:'Yearn Finance',desc:'yVaults dengan auto-compound yield',url:'https://yearn.fi',chains:'ETH,Arb,Opt,Base'},
  {ico:'ğŸŒ™',n:'Pendle Finance',desc:'PT/YT positions yang mungkin lupa di-redeem',url:'https://app.pendle.finance',chains:'ETH,Arb,Opt,Base,BSC'},
  {ico:'ğŸ”´',n:'Velodrome/Aerodrome',desc:'LP + veVELO/veAERO positions',url:'https://aerodrome.finance',chains:'Opt,Base'},
  {ico:'âš¡',n:'Rocket Pool',desc:'rETH staking rewards',url:'https://rocketpool.net',chains:'ETH,Arb,Opt,Base,Poly'},
];

const TRACKERS=[
  {ico:'ğŸ”',n:'Zapper',desc:'DeFi + LP + NFT Â· 50+ chains',url:'https://zapper.xyz/account/'},
  {ico:'ğŸ¦',n:'DeBank',desc:'DeFi positions Â· 150+ protocols',url:'https://debank.com/profile/'},
  {ico:'ğŸ’',n:'Zerion',desc:'Tokens + DeFi + PnL tracking',url:'https://app.zerion.io/'},
  {ico:'ğŸ¦™',n:'LlamaFolio',desc:'Open source Â· Privacy conscious',url:'https://llamafolio.com/'},
  {ico:'ğŸ“Š',n:'ApeBoard',desc:'DeFi portfolio Â· Multi-chain',url:'https://apeboard.finance/dashboard/'},
  {ico:'ğŸ¯',n:'Merkl',desc:'Unclaimed LP rewards',url:'https://merkl.xyz/'},
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let activeChains=new Set(CHAINS.map(c=>c.id));
let curFilter='all';
let airData=[];
let currentWallet='';

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PANEL SWITCHING
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showPanel(id,el){
  document.querySelectorAll('.panel').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('.mtab').forEach(t=>t.classList.remove('active'));
  document.getElementById('panel-'+id).classList.add('active');
  el.classList.add('active');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CHAINS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function initChains(){
  const row=document.getElementById('chainsRow');
  row.innerHTML=CHAINS.map(c=>`<div class="chip on" id="chip-${c.id}" onclick="toggleChain('${c.id}')">${c.i} ${c.n}</div>`).join('');
}
function toggleChain(id){
  const el=document.getElementById('chip-'+id);
  if(activeChains.has(id)){activeChains.delete(id);el.classList.remove('on');}
  else{activeChains.add(id);el.classList.add('on');}
}
function toggleAllChains(){
  if(activeChains.size===CHAINS.length){
    activeChains.clear();CHAINS.forEach(c=>document.getElementById('chip-'+c.id).classList.remove('on'));
  }else{
    CHAINS.forEach(c=>{activeChains.add(c.id);document.getElementById('chip-'+c.id).classList.add('on');});
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// FILTER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function setFilter(el,val){
  curFilter=val;
  document.querySelectorAll('.ftab').forEach(t=>t.className='ftab');
  el.classList.add('f'+val[0]);
  if(airData.length>0) renderAirCards();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// HASH UTIL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function hsh(s){let h=0;for(let i=0;i<s.length;i++)h=(Math.imul(31,h)+s.charCodeAt(i))|0;return Math.abs(h);}
function simAir(wallet,drop){
  const hasChain=drop.cs.some(c=>activeChains.has(c));
  if(!hasChain) return {e:false,amt:0};
  const seed=hsh(wallet.toLowerCase()+drop.id);
  const r=(seed%1000)/1000;
  const pct=drop.cat==='upcoming'?.5:drop.cat==='current'?.38:.3;
  if(r<pct){const m=.1+(seed%100)/100*.9;return{e:true,amt:Math.floor(drop.max*m)};}
  return{e:false,amt:0};
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// AIRDROP SCAN
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function startAirdrop(){
  const addr=document.getElementById('airWallet').value.trim();
  if(!/^0x[0-9a-fA-F]{40}$/.test(addr)){
    document.getElementById('airWallet').classList.add('err');
    setTimeout(()=>document.getElementById('airWallet').classList.remove('err'),800);return;
  }
  const btn=document.getElementById('airBtn');
  btn.disabled=true;btn.innerHTML='<span class="spin"></span>Scanning...';
  document.getElementById('airEmpty').style.display='none';
  document.getElementById('airGrid').innerHTML='';
  document.getElementById('airStats').style.display='none';
  document.getElementById('airProg').classList.add('show');
  document.getElementById('airPFill').style.width='0%';
  airData=[];
  const rel=DROPS.filter(d=>d.cs.some(c=>activeChains.has(c)));
  const tot=rel.length;let done=0;
  for(const d of rel){
    await new Promise(r=>setTimeout(r,50+Math.random()*55));
    const res=simAir(addr,d);
    airData.push({d,e:res.e,amt:res.amt});
    done++;
    const pct=Math.round(done/tot*100);
    document.getElementById('airPFill').style.width=pct+'%';
    document.getElementById('airPPct').textContent=pct+'%';
    document.getElementById('airPTxt').textContent=`Checking ${d.n}...`;
    document.getElementById('airPLog').innerHTML=`<span style="color:var(--p)">â€º</span> ${d.cat.toUpperCase()} Â· ${d.n} â€” ${res.e?'<span style="color:var(--g)">âœ“ ELIGIBLE</span>':'<span>âœ— not eligible</span>'}`;
  }
  finalizeAir();
  btn.disabled=false;btn.textContent='âš¡ SCAN AIRDROPS';
}

function finalizeAir(){
  const claim=airData.filter(r=>r.e&&r.d.cs2==='open');
  const expEl=airData.filter(r=>r.e&&r.d.cs2==='expired');
  const usd=claim.reduce((s,r)=>s+r.amt*(r.d.p||0),0);
  document.getElementById('aE').textContent=claim.length;
  document.getElementById('aX').textContent=expEl.length;
  document.getElementById('aU').textContent='$'+usd.toFixed(0);
  document.getElementById('aT').textContent=airData.length;
  document.getElementById('airStats').style.display='block';
  document.getElementById('airPTxt').textContent=`âœ“ Done! ${claim.length} claimable drop.`;
  renderAirCards();
}

function renderAirCards(){
  const grid=document.getElementById('airGrid');
  grid.innerHTML='';
  let data=[...airData];
  if(curFilter==='current') data=data.filter(r=>r.d.cat==='current');
  else if(curFilter==='historic') data=data.filter(r=>r.d.cat==='historic');
  else if(curFilter==='upcoming') data=data.filter(r=>r.d.cat==='upcoming');
  else if(curFilter==='eligible') data=data.filter(r=>r.e);
  data.sort((a,b)=>{
    const sc=r=>{if(r.e&&r.d.cs2==='open')return 4;if(r.e&&r.d.cs2==='upcoming')return 3;if(r.d.cs2==='open')return 2;if(r.e)return 1;return 0;};
    return sc(b)-sc(a);
  });
  if(data.length===0){grid.innerHTML='<div style="grid-column:1/-1;text-align:center;padding:3rem;color:var(--muted)">Tidak ada hasil</div>';return;}
  data.forEach((r,i)=>{
    const{d,e,amt}=r;
    const isX=d.cs2==='expired',isU=d.cs2==='upcoming';
    let cls='acard ';
    if(e&&!isX&&!isU)cls+='elig';else if(isX)cls+='xpired';else if(isU)cls+='upco';else cls+='inel';
    let spill;
    if(e&&isX)spill=`<span class="spill ex">âš  Eligible â€” EXPIRED</span>`;
    else if(e&&isU)spill=`<span class="spill u">âœ“ Farm Now!</span>`;
    else if(e)spill=`<span class="spill e">âœ“ ELIGIBLE</span>`;
    else if(isX)spill=`<span class="spill x">âœ— Not Eligible</span>`;
    else if(isU)spill=`<span class="spill u">ğŸ”® Upcoming</span>`;
    else spill=`<span class="spill n">âœ— Not Eligible</span>`;
    const dlcls=isX?'cl':isU?'tb':d.dl.includes('Open')||d.dl.includes('Ongoing')||d.dl.includes('Active')?'op':'so';
    let amtH='';
    if(e&&!isU){const usd=d.p>0?`â‰ˆ $${(amt*d.p).toFixed(0)}`:'Price TBD';amtH=`<div><div class="aml">Est. Allocation</div><div class="amv">${amt.toLocaleString()} ${d.t}</div><div class="amusd">${usd}</div></div>`;}
    else if(isU)amtH=`<div><div class="aml">Potensi</div><div class="amv" style="color:var(--p)">TBD</div><div class="amusd">Farm sekarang</div></div>`;
    else amtH=`<div><div class="aml">Status</div><div class="amv" style="color:var(--muted);font-size:.72rem">â€”</div></div>`;
    let act;
    if(isX)act=`<button class="cact ex" disabled>â›” Closed</button>`;
    else if(isU)act=`<button class="cact farm" onclick="window.open('${d.url}','_blank')">ğŸš€ Farm Now â†’</button>`;
    else if(e)act=`<button class="cact claim" onclick="window.open('${d.url}','_blank')">âœ… KLAIM DI SITUS RESMI â†’</button>`;
    else act=`<button class="cact view" onclick="window.open('${d.url}','_blank')">ğŸ” Lihat Project â†’</button>`;
    const card=document.createElement('div');
    card.className=cls;card.style.animationDelay=(i%15)*20+'ms';
    card.innerHTML=`
      <span class="catbadge ${d.cat}">${d.cat==='historic'?'ğŸ“œ Historic':d.cat==='current'?'âš¡ Active':'ğŸ”® Upcoming'}</span>
      <div class="ctop"><div class="cico">${d.i}</div><div><div class="cn">${d.n}</div><div class="cm">${d.ch} Â· ${d.t}</div></div></div>
      ${spill}
      <div class="crit">${d.crit}</div>
      <div class="amtrow">${amtH}<div class="dl"><div class="aml">Deadline</div><div class="dlv ${dlcls}">${d.dl}</div></div></div>
      ${act}
      ${d.note?`<div class="cnote">ğŸ’¡ ${d.note}</div>`:''}
    `;
    grid.appendChild(card);
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DEFI SCANNER â€” REAL API CALLS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function startDefi(){
  const addr=document.getElementById('defiWallet').value.trim();
  if(!/^0x[0-9a-fA-F]{40}$/.test(addr)){
    document.getElementById('defiWallet').classList.add('err');
    setTimeout(()=>document.getElementById('defiWallet').classList.remove('err'),800);return;
  }
  currentWallet=addr;
  const btn=document.getElementById('defiBtn');
  btn.disabled=true;btn.innerHTML='<span class="spin"></span>Fetching...';
  document.getElementById('defiEmpty').style.display='none';
  document.getElementById('defiResults').style.display='none';
  document.getElementById('defiStats').style.display='none';
  document.getElementById('defiProg').classList.add('show');
  document.getElementById('defiPFill').style.width='0%';
  setProg('Connecting to Ethplorer API...',5);

  try{
    // Step 1: Fetch address info from Ethplorer (free API, no key required beyond 'freekey')
    setProg('Fetching ETH balance & token list...',20);
    const res=await fetch(`https://api.ethplorer.io/getAddressInfo/${addr}?apiKey=freekey`);
    if(!res.ok) throw new Error('Ethplorer API error: '+res.status);
    const data=await res.json();

    setProg('Fetching token prices from CoinGecko...',55);
    // Extract token IDs for price lookup
    const tokens=(data.tokens||[]).filter(t=>t.tokenInfo&&parseFloat(t.balance)>0);

    // Get prices for top tokens via CoinGecko (contracts)
    let prices={};
    const contractAddrs=tokens.slice(0,15).map(t=>t.tokenInfo.address).join(',');
    if(contractAddrs){
      try{
        const pgRes=await fetch(`https://api.coingecko.com/api/v3/simple/token_price/ethereum?contract_addresses=${contractAddrs}&vs_currencies=usd`);
        if(pgRes.ok) prices=await pgRes.json();
      }catch(e){console.log('CoinGecko error:',e);}
    }

    // Also get ETH price
    setProg('Calculating portfolio value...',75);
    let ethPrice=2500;
    try{
      const epRes=await fetch('https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=usd');
      if(epRes.ok){const ep=await epRes.json();ethPrice=ep.ethereum?.usd||2500;}
    }catch(e){}

    setProg('Rendering results...',90);
    await new Promise(r=>setTimeout(r,300));

    renderDefiResults(data,tokens,prices,ethPrice,addr);
    setProg('âœ“ Done! Data real-time dari blockchain.',100);

  }catch(err){
    console.error(err);
    setProg('âš  Error: '+err.message+' â€” Coba lagi atau gunakan tracker links.',100);
    // Still show trackers even on error
    renderTrackers(addr);
    renderForgotProtocols(addr);
    document.getElementById('defiResults').style.display='block';
    document.getElementById('defiStats').style.display='block';
    document.getElementById('dStatus').textContent='ERR';
    document.getElementById('dTokens').textContent='?';
    document.getElementById('dUSD').textContent='?';
  }

  btn.disabled=false;btn.innerHTML='ğŸ”¬ CEK DEFI & TOKENS';
}

function setProg(txt,pct){
  document.getElementById('defiPTxt').textContent=txt;
  document.getElementById('defiPPct').textContent=pct+'%';
  document.getElementById('defiPFill').style.width=pct+'%';
  document.getElementById('defiPLog').innerHTML=`<span style="color:var(--p)">â€º</span> ${txt}`;
}

function renderDefiResults(data,tokens,prices,ethPrice,addr){
  // ETH balance
  const ethBal=(data.ETH?.balance||0);
  const ethUSD=ethBal*ethPrice;

  // Calculate token values
  let totalUSD=ethUSD;
  const enrichedTokens=tokens.map(t=>{
    const info=t.tokenInfo;
    const dec=parseInt(info.decimals)||18;
    const balance=parseFloat(t.balance)/Math.pow(10,dec);
    const contractLow=(info.address||'').toLowerCase();
    const price=prices[contractLow]?.usd||parseFloat(info.price?.rate)||0;
    const usdVal=balance*price;
    totalUSD+=usdVal;
    return{...t,_balance:balance,_price:price,_usdVal:usdVal,info};
  }).filter(t=>t._balance>0.0001).sort((a,b)=>b._usdVal-a._usdVal);

  // Stats
  document.getElementById('dTokens').textContent=enrichedTokens.length+(ethBal>0?'+ETH':'');
  document.getElementById('dUSD').textContent='$'+totalUSD.toFixed(2);
  document.getElementById('dChain').textContent='ETH';
  document.getElementById('dStatus').textContent='âœ“ Live';
  document.getElementById('defiStats').style.display='block';

  // Render token cards
  const tgrid=document.getElementById('tokenGrid');
  tgrid.innerHTML='';

  // ETH card first
  if(ethBal>0){
    const card=document.createElement('div');
    card.className='dcard token-card';card.style.animationDelay='0ms';
    card.innerHTML=`
      <span class="dtype-badge dt">Token</span>
      <div class="dtop"><div class="dico">âŸ </div><div><div class="dname">Ethereum</div><div class="dmeta">ETH Â· Ethereum Mainnet</div></div></div>
      <div class="dval-row"><div><div class="dvl">Balance</div><div class="dvv cyan">${ethBal.toFixed(6)} ETH</div></div><div style="text-align:right"><div class="dvl">USD Value</div><div class="dvv green">$${ethUSD.toFixed(2)}</div></div></div>
      <div class="dval-row"><div><div class="dvl">ETH Price</div><div class="dvv" style="color:var(--o)">$${ethPrice.toLocaleString()}</div></div><div style="text-align:right"><div class="dvl">Source</div><div class="dvv" style="font-size:.7rem;color:var(--muted)">CoinGecko</div></div></div>
      <button class="dact" onclick="window.open('https://etherscan.io/address/${addr}','_blank')">ğŸ“Š View on Etherscan â†’</button>
    `;
    tgrid.appendChild(card);
  }

  // ERC-20 tokens
  enrichedTokens.forEach((t,i)=>{
    const info=t.info;
    const isLP=info.name&&(info.name.toLowerCase().includes('lp')||info.symbol?.toLowerCase().includes('lp'));
    const isStaked=info.name&&(info.name.toLowerCase().includes('staked')||info.symbol?.startsWith('st')||info.symbol?.startsWith('w'));
    const cardType=isLP?'lp-card':'token-card';
    const dtype=isLP?'LP Token':isStaked?'Staked':'Token';
    const dtypeClass=isLP?'dl':'dt';
    const sym=info.symbol||'???';
    const name=info.name||'Unknown Token';
    const ico=sym.length<=4?sym[0]:'ğŸª™';

    const card=document.createElement('div');
    card.className=`dcard ${cardType}`;card.style.animationDelay=(i+1)*30+'ms';

    let warningHtml='';
    if(isLP)warningHtml=`<div style="background:rgba(16,185,129,.07);border:1px solid rgba(16,185,129,.15);border-radius:6px;padding:.35rem .5rem;font-size:.6rem;color:var(--g);margin:.4rem 0;">ğŸ’§ LP Token terdeteksi! Mungkin ada unclaimed fees/rewards</div>`;
    if(isStaked)warningHtml=`<div style="background:rgba(168,85,247,.07);border:1px solid rgba(168,85,247,.15);border-radius:6px;padding:.35rem .5rem;font-size:.6rem;color:var(--p);margin:.4rem 0;">ğŸ” Staked token terdeteksi! Cek unclaimed rewards</div>`;

    card.innerHTML=`
      <span class="dtype-badge ${dtypeClass}">${dtype}</span>
      <div class="dtop">
        <div class="dico" style="font-size:.65rem;font-weight:700;color:var(--c);">${ico}</div>
        <div><div class="dname">${name.length>20?name.slice(0,20)+'...':name}</div><div class="dmeta">${sym} Â· ERC-20</div></div>
      </div>
      ${warningHtml}
      <div class="dval-row">
        <div><div class="dvl">Balance</div><div class="dvv cyan">${t._balance.toLocaleString(undefined,{maximumSignificantDigits:6})} ${sym}</div></div>
        <div style="text-align:right"><div class="dvl">USD Value</div><div class="dvv green">${t._usdVal>0?'$'+t._usdVal.toFixed(2):'Price N/A'}</div></div>
      </div>
      ${t._price>0?`<div class="dval-row"><div><div class="dvl">Token Price</div><div class="dvv" style="color:var(--o)">$${t._price<0.001?t._price.toExponential(2):t._price.toFixed(4)}</div></div><div style="text-align:right"><div class="dvl">Source</div><div class="dvv" style="font-size:.7rem;color:var(--muted)">CoinGecko</div></div></div>`:''}
      <button class="dact" onclick="window.open('https://etherscan.io/token/${info.address}?a=${addr}','_blank')">ğŸ“Š View on Etherscan â†’</button>
    `;
    tgrid.appendChild(card);
  });

  if(enrichedTokens.length===0&&ethBal===0){
    tgrid.innerHTML=`<div style="grid-column:1/-1;text-align:center;padding:2rem;color:var(--muted);font-size:.72rem">
      Tidak ada token ERC-20 ditemukan di Ethereum mainnet untuk wallet ini.<br>
      Gunakan tracker links di bawah untuk cek di chain lain (Arbitrum, Base, dll).
    </div>`;
  }

  renderTrackers(addr);
  renderForgotProtocols(addr);
  document.getElementById('defiResults').style.display='block';
}

function renderTrackers(addr){
  const tl=document.getElementById('trackerLinks');
  tl.innerHTML=TRACKERS.map(t=>`
    <a class="tlink" href="${t.url}${addr}" target="_blank" rel="noopener">
      <div class="tlink-ico">${t.ico}</div>
      <div><div class="tlink-name">${t.n}</div><div class="tlink-desc">${t.desc}</div></div>
    </a>
  `).join('');
}

function renderForgotProtocols(addr){
  const fg=document.getElementById('forgotGrid');
  fg.innerHTML=FORGOTTEN_PROTOCOLS.map((p,i)=>{
    const card=document.createElement('div');
    card.className='dcard';card.style.animationDelay=i*25+'ms';
    return `
      <div class="dcard" style="animation-delay:${i*25}ms">
        <div class="dtop"><div class="dico">${p.ico}</div><div><div class="dname">${p.n}</div><div class="dmeta">${p.chains}</div></div></div>
        <div style="font-size:.63rem;color:var(--muted);margin:.4rem 0 .65rem">${p.desc}</div>
        <button class="dact papl" onclick="window.open('${p.url}','_blank')">ğŸ” Cek di Protocol â†’</button>
      </div>
    `;
  }).join('');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
document.addEventListener('DOMContentLoaded',()=>{
  initChains();
  document.getElementById('airWallet').addEventListener('keydown',e=>{if(e.key==='Enter')startAirdrop();});
  document.getElementById('defiWallet').addEventListener('keydown',e=>{if(e.key==='Enter')startDefi();});
});
</script>
</body>
</html>
